<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../includes/head', { title: 'Detail Program' }) %>
</head>

<body>
    <%- include('./../includes/navigation.ejs')%>
    <main class="detail__olahraga">
        <div class="jumbotron">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-8 col-12">
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item" src="<%= program?.video_url %>"></iframe>
                        </div>
                    </div>
                    <div class="col-md-4 col-12 mt-3">
                        <div class="info__video text-white">
                            <div class="info__video--title">
                                <input type="hidden" id="programId" value="<%= program.id %>">
                                <h3 class="font-weight-bold"><%= program.title %></h3>
                            </div>
                            <div class="info__video--content">
                                <p>Durasi : <span><%= parseSecond(program.duration) %></span></p>
                                <p>Alat : <% program.tools.forEach(tool => { %>
                                    <%= tool %>
                                    <% }) %></p>
                                <p>Tipe Latihan : <span><%= program.program_type_name %></span></p>
                            </div>
                            <div class="info__video--description text-justify pr-5 pt-3 text">
                                <p><%= program.description %></p>
                            </div>
                            <% if (!program.is_favorited) { %>
                                <input type="hidden" id="is_favorited" value="0">
                                <div id="changeFavorite" class="info__video--like">
                                    <i class="far fa-heart mr-3"></i>
                                    <p>Tambahkan ke Favorit</p>
                                </div>
                            <% } else { %>
                                <input type="hidden" id="is_favorited" value="1">
                                <div id="changeFavorite" class="info__video--like">
                                    <i class="fas fa-heart mr-3"></i>
                                    <p>Hapus dari Favorit</p>
                                </div>
                            <% } %> 
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="thumbnail__donasi mt-5">
            <div class="container p-5 text-white">
                <div class="row">
                    <div class="col-md-8 col-6 header">
                        <h4 class="mb-3">Keuntungan yang didapat dari jumlah tontonan akan otomatis didonasikan kepada
                            KamiBisa, Inc</h4>
                        <p>KamiBisa, Inc adalah salah satu lembaga filantropi yang bekerjasama dengan OjoMager, Inc.
                            yang mempunyai tujuan sebagai wadah untuk berdonasi secara online. Program donasi tersebut
                            akan disalurkan kedalam program kesehatan, pendidikan, dan bencana alam. Saat ini, donasi
                            yang diberikan dari OjoMager Inc, akan disalurkan untuk korban yang terkena dampak dari
                            pandemi COVID-19.</p>
                    </div>
                    <div class="col-md-4 col-6 text-right">
                        <div class="d-flex justify-content-end mb-3">
                            <h5 class="mr-3 ">
                                KamiBisa, Inc <br> Lembaga Filantropi
                            </h5>

                            <svg width="62" height="62" viewBox="0 0 62 62" fill="none"
                                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <rect width="62" height="62" fill="url(#pattern0)" />
                                <defs>
                                    <pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
                                        <use xlink:href="#image0" transform="scale(0.0016835)" />
                                    </pattern>
                                    <image id="image0" width="594" height="594"
                                        xlink:href="data:image/png;base64,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YAU7UgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISHFQy/ffuw6QFtfv/fj2+u19nr9SuO5x+vt8fpVxrTa3O/1mke+PmMQUgAAISEFABASUjy11/Z277ckKt2KqHALcubXrXLu1eZoz9d2W4+lhBQAQEhIsUjv//Kt9BBzhWOd8aHwPV/vMvHu0RE7OxWPmXEIKRab5VZcpQt/heA7alEypu1Um/uW7yWiWEtIscroX1dQ6cJfIfiOXpSMaTvV5r7Fe4ooEi+Xf79fjRyJ69cvi/9fZ1ygej++9yoca6XxvBjTpqrN/aXoMVOTkGKzRxes3hfU3i6gFY610nhejGlT1eb+UvSYqUVIAQCEPCMFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABASUgAAISEFABB6NXAA9V2/frl5Di/ffphd2JGQgo7cWwwvgy+Is573Wo/G6R5jC/t6ufz7/WqMaSW50G8xykKwZtwqn3Prz8foIeDnCfonpNjk6Av9M9UWgi3jV+Fcj/x8jBQBZ/9cCSpYTkgR6S2gbul9MWgxhr2eoxDI+IcJ1COkWK1CRP0yQ2j0dI5CINP7z5SggvuEFKtUiqj3Ro+Ns8+v58/FDDuTRxBTcJvvkWKxqhF1+XnslY+/Z72Pa8/HV+kz6ecHbrMjxSIjXUTP/Jf1nuN49HlV/Ey4DbqdnSn4yI4U0/Ev6+2qjmEvx119dxf4Q0jx1IgXTotBzthtM8L4+QzAH0KKaR29GOz9fkecjwio+96tiSn4PyEFTOeMCLCzC2MSUkzNQrDcaGNl7oEWhBQPzbDYWFCfM0bbjDx+PhvMTkgBD4kAgPuEFFhQ2ZFdXRibkAKmJgKALYQU/GRB/Zsx2Wam8fNZYVZCCgAgJKSAm+wwbDPj+PnMMCMhBe9YCOZk3oHUq5EDevDy7cdfRyFwgN4JKU5za+G8x4J6rCPH+9Hn4Nd/Z/6X+TyWxg3259YeJbwtEGvCawuLz3GWzulRc9/K0Z+hez8fR/7c/OLnh9kIKUqptqDSjrm/bcm4GDvYj5CiHIvCGHqbx4o7KWvG0M8N7ENIAWWIgT+SsTB+0J6QoiQLQm3mDxiFkAI+8LAwwHJCCm4QE/Rsy46e3UBoS0hRlgWBHolwY8BchBQAQEhIAQCEhBQAQEhIAQCEhBQAQEhIAaXs9duafgsUSAgp4HB+PR4YhZACPrAzA7CckAJOsWVXqnXsiUcgJaSAklrFj4gCthBSwGnOflZKRAFbCSmgrLcQSmNIRAEtCCngVC12pdYE1Zb4Avjs1YjA32ZfaN/O/8jbbm/v1WLMP79Gq9cFuMeOFGX5LqKxvM1n6zkVUcDehBTQFYEMVCKkgJvO3M0RU0AVQgrokpgCKhBSlGSRPcbZzxjt8dwUQEtCCj7xgHJ/xBTQKyFFORbVY/USluYd6JGQohSL6dzc6gN6I6QowQJ6rt5ud/osAL3wzeacpsfF0PNRdfjWcqAHdqSARXqMFjtTwNmEFLBYrzElqICzCCn4yW2i2sQUcAYhBazSc3CKKeBoQgrsRq0mpgD+T0gBETEFIKTAbtQGYgqYnZBiaiJqOzEFzExIAZuJKWBWQopp2Y1qS0wBMxJSTElE7cO4ArMRUkzJDsV+eo0pcw7sQUgxLQvrfsQUMAshxdQsrPsRU8AMhBTTs7Du5y2mPDcFjExIAbvrLabEM9CKkAIL6yHEFDAiIQU/WVj351YfMBohBRyul5gSz8BWr0YQ/nhbWO2YHONtnIVMxrhBP+xIAafp4VafKAG2EFLwiYX1eHYBgarc2uM0axdPgTO2M2/1uaULpOxIUcaRC51oO4eYAaoRUpRioR2fOQYqEVKUY6Ed3xlzbBcSSAgpoEuCGajAw+aUdMSDyR5Avu/Z2Bs3YBZ2pIDF3gJqScAu/d89c3SQub0HrCWkKMuux3HSMGoRVOYZ6JmQAh5qsUtjpwcYlZCCB2YPgJbnv+W17EoBvRJSAO/MHs/AOkIKuGmPoLArBYxGSFGaxXUfdmUAlhFSAAAhIQV8cMQXnabsQAK9EVIAACEhBU94XgiAe4QU8NsR0Vjh9px4BpYSUkApnpMCeiKkAABCrwYOuLidVcrWXTlzDe3YkQIO47YcMBohBQAQElIAACEhBRzCbT1gREIKACAkpAAAQkIK8OvwACEhBezO81HAqIQUAEBISAEAhIQUAEBISMETnu+ZjzkHlhJSAAAhIUVpfm0fgDMJKQCAkJACSrELCfRESAEAhIQUAEBISFGWWzwAnE1IwQOzfJ/Q3ufZKnqPiGffIQWsIaQoyW4UAD0QUgAAISFFOXajato6b+Yd6JGQohSLKXvyfBSwlpCihLeAOjqiLKrtpXMooIFevZoZzmJx7MtbOB4xJ7/eY2mo+pwAPRNSwCkeBdUZ8WQHEkgIKbjBonocO05AZZ6RAn4TkADrCClgegISSAkp+GT2RXX28wdYQ0gBUxOOwBZCCt6xqAKwhpAC/jJLUApnYCshBT9ZVD8afTzMN9CCkOIhiw0A3CekQDDeNeq4mG+gFSHF9I5aVPd+n71ef7ToqDoPLV+/+hhAT4QUU3PBX2aUcTLfQGtCiqfc3mGE8TLfwB6EFFM6a1GtfvutaowcfdwV5tmtYGhDSLHISBdHF/ptqo2f+Qb2JKRYbIQFqYdzaH0MZ5zT23tW+DyceYwV5nmEzyKc7eXy7/erWWCN69cv5carxwt8i3Hs5bx6+0z0NN8V5nmkzyIcTUgRqRJTvV/ct4zjqHG4Ra/zXWGeR/sswlGEFJv0GFQVL+prxrHC+R39uagy5xXmebTPIuxNSNGUBXSbR+NX+Vxbfy6qz3uFeR71switCSngFEviyoIN9O7VDAFnEEnACHz9AQBASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAISEFABASEgBAASuX7+8CCkAgJCQAgAICSkAgJCQAgAICSkAgJCQAgAI/fP2q3sGDwBgPTtSAAAhIQUAsNKvO3pCCgAgJKQAAEL/hZQHzgEA1rMjBQCwwvsNKCEFABD6HVJu7wEArGNHCgBgoc8bT0IKACD0IaTc3gMAWM6OFADAArc2nIQUAEDor5Byew8AYBk7UgAAT9zbaLoZUnalAACesyMFAPDAow2muyFlVwoA4DE7UgAAdzzbWHoYUnalAADusyMFAHDDkg2lpyFlVwoAmM3S/lm0IyWmAAD+5tYeAMA7azaQFoeUXSkAYHRre2fVjpSYAgD4Y/WtPTEFAIwoaRzPSAEA00s3iqKQsisFAIxiS9fEO1JiCgCobmvPbLq1J6YAgKpadMzmZ6TEFABQTat+afKwuZgCAKpo2S3NfmtPTAEAvWvdK02//kBMAQC92qNTmn+PlJgCAHqzV5/s8oWcYgoA6MWeXfJyvV53Pc2Xbz/2fQMAgDv23tzZPaQuYgoAONhRd8cO+Vt7bvUBAEc5sjsO2ZH68IZ2pwCAHZyxcXN4SP1+Y0EFADRy1t2v00LqIqYAgI3Ofnzo1JD6fRCCCgBYoZfnr7sIqV8EFQDwSG+/wNZVSL0nqgCAS+e//d9tSL0nqgBgPhW+PqlESL0nqgBgXNW+e7JcSH0mrACgphG+sLt8SD0isgDgfMP+hZPL5fI/NPo4RI307iIAAAAASUVORK5CYII=" />
                                </defs>
                            </svg>
                        </div>
                        <p class="mt-5">Donasi Terkumpul: <br>Rp. 525,250</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- main-card content -->
        <div class="card__content">
            <div class="container">
                <div class="row align-items-baseline">
                    <div class="col">
                        <h2>Video Olahraga Lainnya</h2>
                    </div>
                    <div class="col text-right align-text-bottom">
                        <a href="#">Lihat semua <svg width="19" height="17" viewBox="0 0 19 17" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M1.5 8.5H17.5" stroke="#0075E7" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" />
                                <path d="M10.5 1.5L17.5 8.5L10.5 15.5" stroke="#0075E7" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        <% randomProgram.forEach(program => { %>
                        <div class="swiper-slide">
                            <a href="/program/<%= program.slug %> " style="text-decoration: none; color: inherit;">
                                <div class="card">
                                    <img class="card-img-top" src="<%= program.image_url %> " alt="Card image cap">
                                    <div class="card-body">
                                        <div class="title__flexbox d-flex align-items-baseline mb-2">
                                            <button class="btn btn-sm btn-success mr-1"
                                                style="background-color: #<%= program.program_type_button_color_code %>; border-color: #<%= program.program_type_button_color_code %>;">
                                                <%= program.program_type_name %>
                                            </button>
                                            <svg class="mr-2" width="19" height="21" viewBox="0 0 19 21" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M12.5703 0.0100098H6.57031V2.01001H12.5703V0.0100098ZM8.57031 13.01H10.5703V7.01001H8.57031V13.01ZM16.6003 6.39001L18.0203 4.97001C17.5903 4.46001 17.1203 3.98001 16.6103 3.56001L15.1903 4.98001C13.5976 3.69834 11.6146 2.9997 9.57031 3.00001C4.60031 3.00001 0.570312 7.03001 0.570312 12C0.570312 16.97 4.59031 21 9.57031 21C14.5503 21 18.5703 16.97 18.5703 12C18.5703 9.89001 17.8303 7.94001 16.6003 6.39001ZM9.57031 19.01C5.70031 19.01 2.57031 15.88 2.57031 12.01C2.57031 8.14001 5.70031 5.01001 9.57031 5.01001C13.4403 5.01001 16.5703 8.14001 16.5703 12.01C16.5703 15.88 13.4403 19.01 9.57031 19.01Z"
                                                    fill="#757575" />
                                            </svg>
                                            <span><%= parseSecond(program.duration) %> </span>
                                        </div>
                                        <h5 class="card-text font-weight-bold"><%= program.title %> </h5>
                                        <P class="text-justify text-muted"><%= truncateString(program.description) %>
                                        </P>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <% }) %>
                    </div>
                    <!-- Add Arrows -->
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </div>
            </div>
        </div>
    </main>
    <%- include('./../includes/footer.ejs')%>
    <%- include('./../includes/end.ejs') %>
    <script>
        const swiper = new Swiper('.swiper-container', {
            grabCursor: true,
            coverflowEffect: {
                rotate: 50,
                stretch: 0,
                depth: 100,
                modifier: 1,
                slideShadows: true,
            },
            slidesPerView: 3,
            spaceBetween: 30,
            slidesPerGroup: 1,
            pagination: {
                el: '.swiper-pagination',
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });

        $('#changeFavorite').click(() => {
            const token = getCookie('jwt_token');
            const programId = $('#programId').val();
            const isFavorited = $('#is_favorited').val();

            if (isFavorited == "1") {;
                return deleteFavoritesProgram(token, programId);
            } else if (isFavorited == "0") {
                return addFavoritesProgram(token, programId);
            }
        })

        function addFavoritesProgram(token, programId) {
            const userApi = new api.User();
            userApi.addFavoritesProgram(token, programId).then(res => {
                successAlertWithTimer('Berhasil menambahkan program sebagai program favorit');
                setTimeout(() => {
                    window.location.reload();
                }, 2000)
            }).catch(err =>{
                errorHandling(err.response);
            });
        }

        function deleteFavoritesProgram(token, programId) {
            const userApi = new api.User();
            userApi.deleteFavoritesProgram(token, programId).then(res => {
                successAlertWithTimer('Berhasil menghapus program dari program favorit');
                setTimeout(() => {
                    window.location.reload();
                }, 2000)
            }).catch(err =>{
                errorHandling(err.response);
            });
        }
    </script>
</body>

</html>